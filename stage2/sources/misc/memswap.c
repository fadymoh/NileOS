#include "memswap.h"

static fast_memswap_handler fast_memswap_handlers[256];
void init_fast_memswap_handlers()
{
	fast_memswap_handlers[0] = fast_memswap256;
	fast_memswap_handlers[1] = fast_memswap1;
	fast_memswap_handlers[2] = fast_memswap2;
	fast_memswap_handlers[3] = fast_memswap3;
	fast_memswap_handlers[4] = fast_memswap4;
	fast_memswap_handlers[5] = fast_memswap5;
	fast_memswap_handlers[6] = fast_memswap6;
	fast_memswap_handlers[7] = fast_memswap7;
	fast_memswap_handlers[8] = fast_memswap8;
	fast_memswap_handlers[9] = fast_memswap9;
	fast_memswap_handlers[10] = fast_memswap10;
	fast_memswap_handlers[11] = fast_memswap11;
	fast_memswap_handlers[12] = fast_memswap12;
	fast_memswap_handlers[13] = fast_memswap13;
	fast_memswap_handlers[14] = fast_memswap14;
	fast_memswap_handlers[15] = fast_memswap15;
	fast_memswap_handlers[16] = fast_memswap16;
	fast_memswap_handlers[17] = fast_memswap17;
	fast_memswap_handlers[18] = fast_memswap18;
	fast_memswap_handlers[19] = fast_memswap19;
	fast_memswap_handlers[20] = fast_memswap20;
	fast_memswap_handlers[21] = fast_memswap21;
	fast_memswap_handlers[22] = fast_memswap22;
	fast_memswap_handlers[23] = fast_memswap23;
	fast_memswap_handlers[24] = fast_memswap24;
	fast_memswap_handlers[25] = fast_memswap25;
	fast_memswap_handlers[26] = fast_memswap26;
	fast_memswap_handlers[27] = fast_memswap27;
	fast_memswap_handlers[28] = fast_memswap28;
	fast_memswap_handlers[29] = fast_memswap29;
	fast_memswap_handlers[30] = fast_memswap30;
	fast_memswap_handlers[31] = fast_memswap31;
	fast_memswap_handlers[32] = fast_memswap32;
	fast_memswap_handlers[33] = fast_memswap33;
	fast_memswap_handlers[34] = fast_memswap34;
	fast_memswap_handlers[35] = fast_memswap35;
	fast_memswap_handlers[36] = fast_memswap36;
	fast_memswap_handlers[37] = fast_memswap37;
	fast_memswap_handlers[38] = fast_memswap38;
	fast_memswap_handlers[39] = fast_memswap39;
	fast_memswap_handlers[40] = fast_memswap40;
	fast_memswap_handlers[41] = fast_memswap41;
	fast_memswap_handlers[42] = fast_memswap42;
	fast_memswap_handlers[43] = fast_memswap43;
	fast_memswap_handlers[44] = fast_memswap44;
	fast_memswap_handlers[45] = fast_memswap45;
	fast_memswap_handlers[46] = fast_memswap46;
	fast_memswap_handlers[47] = fast_memswap47;
	fast_memswap_handlers[48] = fast_memswap48;
	fast_memswap_handlers[49] = fast_memswap49;
	fast_memswap_handlers[50] = fast_memswap50;
	fast_memswap_handlers[51] = fast_memswap51;
	fast_memswap_handlers[52] = fast_memswap52;
	fast_memswap_handlers[53] = fast_memswap53;
	fast_memswap_handlers[54] = fast_memswap54;
	fast_memswap_handlers[55] = fast_memswap55;
	fast_memswap_handlers[56] = fast_memswap56;
	fast_memswap_handlers[57] = fast_memswap57;
	fast_memswap_handlers[58] = fast_memswap58;
	fast_memswap_handlers[59] = fast_memswap59;
	fast_memswap_handlers[60] = fast_memswap60;
	fast_memswap_handlers[61] = fast_memswap61;
	fast_memswap_handlers[62] = fast_memswap62;
	fast_memswap_handlers[63] = fast_memswap63;
	fast_memswap_handlers[64] = fast_memswap64;
	fast_memswap_handlers[65] = fast_memswap65;
	fast_memswap_handlers[66] = fast_memswap66;
	fast_memswap_handlers[67] = fast_memswap67;
	fast_memswap_handlers[68] = fast_memswap68;
	fast_memswap_handlers[69] = fast_memswap69;
	fast_memswap_handlers[70] = fast_memswap70;
	fast_memswap_handlers[71] = fast_memswap71;
	fast_memswap_handlers[72] = fast_memswap72;
	fast_memswap_handlers[73] = fast_memswap73;
	fast_memswap_handlers[74] = fast_memswap74;
	fast_memswap_handlers[75] = fast_memswap75;
	fast_memswap_handlers[76] = fast_memswap76;
	fast_memswap_handlers[77] = fast_memswap77;
	fast_memswap_handlers[78] = fast_memswap78;
	fast_memswap_handlers[79] = fast_memswap79;
	fast_memswap_handlers[80] = fast_memswap80;
	fast_memswap_handlers[81] = fast_memswap81;
	fast_memswap_handlers[82] = fast_memswap82;
	fast_memswap_handlers[83] = fast_memswap83;
	fast_memswap_handlers[84] = fast_memswap84;
	fast_memswap_handlers[85] = fast_memswap85;
	fast_memswap_handlers[86] = fast_memswap86;
	fast_memswap_handlers[87] = fast_memswap87;
	fast_memswap_handlers[88] = fast_memswap88;
	fast_memswap_handlers[89] = fast_memswap89;
	fast_memswap_handlers[90] = fast_memswap90;
	fast_memswap_handlers[91] = fast_memswap91;
	fast_memswap_handlers[92] = fast_memswap92;
	fast_memswap_handlers[93] = fast_memswap93;
	fast_memswap_handlers[94] = fast_memswap94;
	fast_memswap_handlers[95] = fast_memswap95;
	fast_memswap_handlers[96] = fast_memswap96;
	fast_memswap_handlers[97] = fast_memswap97;
	fast_memswap_handlers[98] = fast_memswap98;
	fast_memswap_handlers[99] = fast_memswap99;
	fast_memswap_handlers[100] = fast_memswap100;
	fast_memswap_handlers[101] = fast_memswap101;
	fast_memswap_handlers[102] = fast_memswap102;
	fast_memswap_handlers[103] = fast_memswap103;
	fast_memswap_handlers[104] = fast_memswap104;
	fast_memswap_handlers[105] = fast_memswap105;
	fast_memswap_handlers[106] = fast_memswap106;
	fast_memswap_handlers[107] = fast_memswap107;
	fast_memswap_handlers[108] = fast_memswap108;
	fast_memswap_handlers[109] = fast_memswap109;
	fast_memswap_handlers[110] = fast_memswap110;
	fast_memswap_handlers[111] = fast_memswap111;
	fast_memswap_handlers[112] = fast_memswap112;
	fast_memswap_handlers[113] = fast_memswap113;
	fast_memswap_handlers[114] = fast_memswap114;
	fast_memswap_handlers[115] = fast_memswap115;
	fast_memswap_handlers[116] = fast_memswap116;
	fast_memswap_handlers[117] = fast_memswap117;
	fast_memswap_handlers[118] = fast_memswap118;
	fast_memswap_handlers[119] = fast_memswap119;
	fast_memswap_handlers[120] = fast_memswap120;
	fast_memswap_handlers[121] = fast_memswap121;
	fast_memswap_handlers[122] = fast_memswap122;
	fast_memswap_handlers[123] = fast_memswap123;
	fast_memswap_handlers[124] = fast_memswap124;
	fast_memswap_handlers[125] = fast_memswap125;
	fast_memswap_handlers[126] = fast_memswap126;
	fast_memswap_handlers[127] = fast_memswap127;
	fast_memswap_handlers[128] = fast_memswap128;
	fast_memswap_handlers[129] = fast_memswap129;
	fast_memswap_handlers[130] = fast_memswap130;
	fast_memswap_handlers[131] = fast_memswap131;
	fast_memswap_handlers[132] = fast_memswap132;
	fast_memswap_handlers[133] = fast_memswap133;
	fast_memswap_handlers[134] = fast_memswap134;
	fast_memswap_handlers[135] = fast_memswap135;
	fast_memswap_handlers[136] = fast_memswap136;
	fast_memswap_handlers[137] = fast_memswap137;
	fast_memswap_handlers[138] = fast_memswap138;
	fast_memswap_handlers[139] = fast_memswap139;
	fast_memswap_handlers[140] = fast_memswap140;
	fast_memswap_handlers[141] = fast_memswap141;
	fast_memswap_handlers[142] = fast_memswap142;
	fast_memswap_handlers[143] = fast_memswap143;
	fast_memswap_handlers[144] = fast_memswap144;
	fast_memswap_handlers[145] = fast_memswap145;
	fast_memswap_handlers[146] = fast_memswap146;
	fast_memswap_handlers[147] = fast_memswap147;
	fast_memswap_handlers[148] = fast_memswap148;
	fast_memswap_handlers[149] = fast_memswap149;
	fast_memswap_handlers[150] = fast_memswap150;
	fast_memswap_handlers[151] = fast_memswap151;
	fast_memswap_handlers[152] = fast_memswap152;
	fast_memswap_handlers[153] = fast_memswap153;
	fast_memswap_handlers[154] = fast_memswap154;
	fast_memswap_handlers[155] = fast_memswap155;
	fast_memswap_handlers[156] = fast_memswap156;
	fast_memswap_handlers[157] = fast_memswap157;
	fast_memswap_handlers[158] = fast_memswap158;
	fast_memswap_handlers[159] = fast_memswap159;
	fast_memswap_handlers[160] = fast_memswap160;
	fast_memswap_handlers[161] = fast_memswap161;
	fast_memswap_handlers[162] = fast_memswap162;
	fast_memswap_handlers[163] = fast_memswap163;
	fast_memswap_handlers[164] = fast_memswap164;
	fast_memswap_handlers[165] = fast_memswap165;
	fast_memswap_handlers[166] = fast_memswap166;
	fast_memswap_handlers[167] = fast_memswap167;
	fast_memswap_handlers[168] = fast_memswap168;
	fast_memswap_handlers[169] = fast_memswap169;
	fast_memswap_handlers[170] = fast_memswap170;
	fast_memswap_handlers[171] = fast_memswap171;
	fast_memswap_handlers[172] = fast_memswap172;
	fast_memswap_handlers[173] = fast_memswap173;
	fast_memswap_handlers[174] = fast_memswap174;
	fast_memswap_handlers[175] = fast_memswap175;
	fast_memswap_handlers[176] = fast_memswap176;
	fast_memswap_handlers[177] = fast_memswap177;
	fast_memswap_handlers[178] = fast_memswap178;
	fast_memswap_handlers[179] = fast_memswap179;
	fast_memswap_handlers[180] = fast_memswap180;
	fast_memswap_handlers[181] = fast_memswap181;
	fast_memswap_handlers[182] = fast_memswap182;
	fast_memswap_handlers[183] = fast_memswap183;
	fast_memswap_handlers[184] = fast_memswap184;
	fast_memswap_handlers[185] = fast_memswap185;
	fast_memswap_handlers[186] = fast_memswap186;
	fast_memswap_handlers[187] = fast_memswap187;
	fast_memswap_handlers[188] = fast_memswap188;
	fast_memswap_handlers[189] = fast_memswap189;
	fast_memswap_handlers[190] = fast_memswap190;
	fast_memswap_handlers[191] = fast_memswap191;
	fast_memswap_handlers[192] = fast_memswap192;
	fast_memswap_handlers[193] = fast_memswap193;
	fast_memswap_handlers[194] = fast_memswap194;
	fast_memswap_handlers[195] = fast_memswap195;
	fast_memswap_handlers[196] = fast_memswap196;
	fast_memswap_handlers[197] = fast_memswap197;
	fast_memswap_handlers[198] = fast_memswap198;
	fast_memswap_handlers[199] = fast_memswap199;
	fast_memswap_handlers[200] = fast_memswap200;
	fast_memswap_handlers[201] = fast_memswap201;
	fast_memswap_handlers[202] = fast_memswap202;
	fast_memswap_handlers[203] = fast_memswap203;
	fast_memswap_handlers[204] = fast_memswap204;
	fast_memswap_handlers[205] = fast_memswap205;
	fast_memswap_handlers[206] = fast_memswap206;
	fast_memswap_handlers[207] = fast_memswap207;
	fast_memswap_handlers[208] = fast_memswap208;
	fast_memswap_handlers[209] = fast_memswap209;
	fast_memswap_handlers[210] = fast_memswap210;
	fast_memswap_handlers[211] = fast_memswap211;
	fast_memswap_handlers[212] = fast_memswap212;
	fast_memswap_handlers[213] = fast_memswap213;
	fast_memswap_handlers[214] = fast_memswap214;
	fast_memswap_handlers[215] = fast_memswap215;
	fast_memswap_handlers[216] = fast_memswap216;
	fast_memswap_handlers[217] = fast_memswap217;
	fast_memswap_handlers[218] = fast_memswap218;
	fast_memswap_handlers[219] = fast_memswap219;
	fast_memswap_handlers[220] = fast_memswap220;
	fast_memswap_handlers[221] = fast_memswap221;
	fast_memswap_handlers[222] = fast_memswap222;
	fast_memswap_handlers[223] = fast_memswap223;
	fast_memswap_handlers[224] = fast_memswap224;
	fast_memswap_handlers[225] = fast_memswap225;
	fast_memswap_handlers[226] = fast_memswap226;
	fast_memswap_handlers[227] = fast_memswap227;
	fast_memswap_handlers[228] = fast_memswap228;
	fast_memswap_handlers[229] = fast_memswap229;
	fast_memswap_handlers[230] = fast_memswap230;
	fast_memswap_handlers[231] = fast_memswap231;
	fast_memswap_handlers[232] = fast_memswap232;
	fast_memswap_handlers[233] = fast_memswap233;
	fast_memswap_handlers[234] = fast_memswap234;
	fast_memswap_handlers[235] = fast_memswap235;
	fast_memswap_handlers[236] = fast_memswap236;
	fast_memswap_handlers[237] = fast_memswap237;
	fast_memswap_handlers[238] = fast_memswap238;
	fast_memswap_handlers[239] = fast_memswap239;
	fast_memswap_handlers[240] = fast_memswap240;
	fast_memswap_handlers[241] = fast_memswap241;
	fast_memswap_handlers[242] = fast_memswap242;
	fast_memswap_handlers[243] = fast_memswap243;
	fast_memswap_handlers[244] = fast_memswap244;
	fast_memswap_handlers[245] = fast_memswap245;
	fast_memswap_handlers[246] = fast_memswap246;
	fast_memswap_handlers[247] = fast_memswap247;
	fast_memswap_handlers[248] = fast_memswap248;
	fast_memswap_handlers[249] = fast_memswap249;
	fast_memswap_handlers[250] = fast_memswap250;
	fast_memswap_handlers[251] = fast_memswap251;
	fast_memswap_handlers[252] = fast_memswap252;
	fast_memswap_handlers[253] = fast_memswap253;
	fast_memswap_handlers[254] = fast_memswap254;
	fast_memswap_handlers[255] = fast_memswap255;
}

void fast_memswap(void *dest, void *src, uint64_t l)
{
	uint16_t ab = 0;
	while (l != 0)
	{
		uint16_t b = fast_memswap_handlers[(uint8_t)l](dest + ab, src + ab);
		ab += b;
		l -= b;
	}
}